<!DOCTYPE html>

<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width,initial-scale=1" name="viewport" />
  <meta
    content="Gimhan Pabasara ‚Äî Software Engineer &amp; Social Media Handler. Facebook/Instagram ads, lead generation, conversion campaigns, and performance optimization."
    name="description" />
  <title>Gimhan Pabasara | Digital Marketer | Software Engineer &amp; Digital Marketing</title>
  <!-- Open Graph -->
  <meta content="Gimhan Pabasara | Software Engineer &amp; Digital Marketing" property="og:title" />
  <meta
    content="Social Media Handler. Facebook/Instagram ads, lead generation, conversion campaigns, and performance optimization."
    property="og:description" />
  <meta content="website" property="og:type" />
  <meta content="profile.jpg" property="og:image" />

  <link rel="stylesheet" href="./style.css">
</head>

<body>
  <div class="wrap">
    <nav aria-label="Primary" class="nav">
      <div class="brand">
        <div aria-hidden="true" class="logo"></div>
        <div>
          <h1>Gimhan Pabasara</h1>
          <p>Software Engineer | Digital Marketer</p>
        </div>
      </div>
      <div class="navlinks">
        <a class="chip small" href="#services">Services</a>
        <a class="chip small" href="#proof">Case Studies</a>
        <a class="chip small" href="#pricing">Packages</a>
        <a class="chip small" href="#projects">Projects</a>
        <a class="chip small" href="#contact">Contact</a>
        <button aria-label="Toggle language" class="chip small" id="langToggle" type="button">‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω / EN</button>
        <a class="chip primary" href="#audit">Free Audit</a>
      </div>
    </nav>
    <div class="hero">
      <div class="card heroMain">
        <span class="kicker"><span aria-hidden="true" class="dot"></span> Digital marketing is the strategic use of
          online platforms to build brand visibility, attract the right audience, and drive measurable business
          growth.</span>
        <h2>
          Software Engineer &amp; <span class="grad">Digital Marketer</span>
        </h2>
        <p class="lead"><span data-lang="EN">I help businesses reach their goals through data-driven campaigns,
            compelling creatives, and continuous performance optimization.</span><span data-lang="SI"
            style="display:none">‡∂Ø‡∂≠‡∑ä‡∂≠ ‡∂∏‡∂≠ ‡∂¥‡∂Ø‡∂±‡∂∏‡∑ä ‡∑Ä‡∑ñ ‡∑Ä‡∑ä‚Äç‡∂∫‡∑è‡∂¥‡∑è‡∂ª, ‡∂Ü‡∂ö‡∂ª‡∑ä‡∑Ç‡∂´‡∑ì‡∂∫ ‡∂±‡∑í‡∂ª‡∑ä‡∂∏‡∑è‡∂´ ‡∑É‡∑Ñ ‡∂Ö‡∂õ‡∂´‡∑ä‡∂© ‡∂ö‡∑è‡∂ª‡∑ä‡∂∫ ‡∑É‡∑è‡∂∞‡∂± ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑É‡∑ä‡∂≠‡∑í‡∂ö‡∂ª‡∂´‡∂∫ ‡∑Ñ‡∂ª‡∑Ñ‡∑è
            ‡∑Ä‡∑ä‚Äç‡∂∫‡∑è‡∂¥‡∑è‡∂ª‡∑Ä‡∂Ω‡∂ß ‡∂î‡∑Ä‡∑î‡∂±‡∑ä‡∂ú‡∑ö ‡∂â‡∂Ω‡∂ö‡∑ä‡∂ö ‡∂ö‡∂ª‡∑è ‡∑Ö‡∂ü‡∑è ‡∑Ä‡∑ì‡∂∏‡∂ß ‡∂∏‡∂∏ ‡∂ã‡∂Ø‡∑Ä‡∑ä ‡∂ö‡∂ª‡∂∏‡∑í.
          </span></p>
        <div aria-label="Highlights" class="bullets">
          <div class="b"><i aria-hidden="true"></i> Specialist in Social Media Marketing &amp; Instagram advertising (lead gen &amp;
            Page Handling).</div>
          <div class="b"><i aria-hidden="true"></i> Paid Advertising: performance tracking, reporting, and
            continuous optimization.</div>
          <div class="b"><i aria-hidden="true"></i> Develop scroll-stopping creatives, ad copy, and content plans aligned with your brand voice and target audience.</div>
        </div>
        <div class="ctaRow">
          <a class="btn primary" href="#" id="btnWhatsApp" rel="noopener">
            <span aria-hidden="true" class="icon">üí¨</span> WhatsApp Now
          </a>
          <a class="btn secondary" href="#" id="btnEmail">
            <span aria-hidden="true" class="icon">‚úâÔ∏è</span> Email
          </a>
          <button class="btn" id="btnDownloadVcard" type="button">
            <span aria-hidden="true" class="icon">üìá</span> Save Contact
          </button>
        </div>
        <div class="divider"></div>
        <div class="grid2">
          <div class="panel">
            <h4>Current Roles</h4>
            <p>Operating across in-house + agency + freelance ‚Äî focused on measurable outcomes.</p>
            <div aria-label="Roles" class="pillRow">
              <span class="pill">Software Engineer ‚Äî Omnistack Technologies (Pvt) Ltd</span>
              <span class="pill">Freelance Social Media Marketer</span>
            </div>
          </div>
          <div class="panel">
            <h4>What you get</h4>
            <ul>
              <li>Campaign structure designed around your funnel (awareness ‚Üí consideration ‚Üí conversion).</li>
              <li>Creative direction + testing plan (angles, hooks, formats, placements).</li>
              <li>Weekly performance snapshot &amp; next-step actions.</li>
              <li>Audience strategy: interest stacks, retargeting, lookalikes, exclusions.</li>
            </ul>
          </div>
        </div>
      </div>
      <div class="card heroSide">
        <div class="profile">
          <div class="avatar">
            <img alt="Gimhan Pabasara"
              src="./images/WhatsApp Image 2026-01-30 at 20.41.56.jpeg"
              style="display:block;width:100%;height:100%;object-fit:cover;object-position:center 20%;" />
          </div>
          <div>
            <h3>Gimhan Pabasara</h3>
            <p>Software Engineer ‚Ä¢ Digital Marketer ‚Ä¢ Social Media Marketing <br />
              Based in Sri Lanka (Kalutara, Western Province)</p>
            <div class="tags">
              <span class="tag">Software</span>
              <span class="tag">Digital Marketing</span>
              <span class="tag">Page Handling</span>
              <span class="tag">Creative Design</span>
              <span class="tag">Analytics</span>
            </div>
          </div>
        </div>
        <div class="miniGrid">
          <div class="stat pulse">
            <div class="k">Core Focus</div>
            <div class="v">Software Solutions</div>
            <div class="s">AI-driven Software Solutions, B2B & B2C Solutions, UX Design, Web & Mobile Application Development, SAAS and Custom Software Solutions.</div>
          </div>
          <div class="stat">
            <div class="k">Stack</div>
            <div class="v">Java ‚Ä¢ React ‚Ä¢ Angular ‚Ä¢ Spring</div>
            <div class="s">UX Design, F & B Development, Product Management, Quality Assuarnce, Installations
               &amp; AI For Future Services</div>
          </div>
          <div class="stat">
            <div class="k">Quick Contact</div>
            <div class="v mono">+94 76 8 616 628</div>
            <div class="s mono">gimhanpabasara4@gmail.com</div>
          </div>
        </div>
      </div>
    </div>
    <section id="services">
      <div class="secHead">
        <div>
          <h3><span data-lang="EN">Services</span><span data-lang="SI" style="display:none">‡∑É‡∑ö‡∑Ä‡∑è</span></h3>
          <p>Premium execution for brands that want Build Software + clean strategy + measurable numbers (not ‚Äúboost post‚Äù marketing).
          </p>
        </div>
      </div>
      <div class="grid3">
        <div class="panel">
          <h4>Software Solutions</h4>
          <p>We provide reliable software solutions that help businesses streamline operations, improve efficiency, and scale with confidence. Our services are tailored to meet unique business needs, delivering secure, user-friendly, and future-ready digital systems.</p>
          <ul>
            <li>Enterprise Solutions / Software Maintenance & Support / Quality Assurance & Testing / Cloud & Hosting Solutions / IT Consulting & Digital Transformation</li>
            <li>Custom Software Development / Web & Mobile App Development</li>
            <li>UI/UX Design &amp; E-commerce Solutions</li>
          </ul>
        </div>
        <div class="panel">
          <h4>Paid Ads (Meta)</h4>
          <p>Full-funnel campaign build: audiences, creatives, landing flow, tracking, and optimization.</p>
          <ul>
            <li>Lead Generation / WhatsApp / Website Conversion objectives</li>
            <li>A/B testing plan (creative, audience, placement, bid strategy)</li>
            <li>Retargeting &amp; lookalike setup</li>
          </ul>
        </div>
        <div class="panel">
          <h4>Social Media Management</h4>
          <p>Content system designed to build brand trust + feed ad performance with better creatives.</p>
          <ul>
            <li>Monthly content calendar (reels + static)</li>
            <li>Community management + customer handling</li>
            <li>Creative direction &amp; performance review</li>
          </ul>
        </div>
        <div class="panel">
          <h4>Analytics &amp; Reporting</h4>
          <p>Clarity every week: what‚Äôs working, what‚Äôs not, and what changes next.</p>
          <ul>
            <li>Weekly KPI snapshot (CPL/CPA, ROAS, CTR, CVR)</li>
            <li>Optimization checklist &amp; next action plan</li>
            <li>Audience and creative insights</li>
          </ul>
        </div>

        <br>
       
        <div class="panel" style="margin-top:14px">
          <h4 style="margin:0 0 8px">Admin Controls</h4>
          <p style="margin:0;color: rgba(255,255,255,.72); font-size:13px; line-height:1.6">
            Update availability badge (stored locally on this device).
          </p>
          <div class="row" style="margin-top:12px">
            <div>
              <label for="slotsLeft">Slots left this month</label>
              <input id="slotsLeft" placeholder="Ex: 2" />
            </div>
            <div>
              <label for="slotsNote">Short note (optional)</label>
              <input id="slotsNote" placeholder="Ex: Bookings open until Feb 10" />
            </div>
          </div>
          <div class="formActions" style="margin-top:12px">
            <button class="btn primary" id="saveSlots" type="button">Save Availability</button>
            <button class="btn" id="resetSlots" type="button">Reset</button>
          </div>
        </div>
      </div>
    </section>
    <section id="tech">
      <div class="secHead">
        <div>
          <h3><span data-lang="EN">AI-Powered Workflow</span><span data-lang="SI" style="display:none">AI-‡∑É‡∑Ñ‡∑í‡∂≠
              ‡∂ö‡∑ä‚Äç‡∂ª‡∑í‡∂∫‡∑è‡∑Ä‡∂Ω‡∑í‡∂∫</span></h3>
          <p>Modern performance marketing flow: faster lead handling, cleaner follow-ups, and a smoother client journey.
          </p>
        </div>
      </div>
      <div class="grid3">
        <div class="panel">
          <h4>Smart Lead Capture</h4>
          <p>A structured brief is collected instantly ‚Äî ready to turn inquiries into an execution plan.</p>
        </div>
        <div class="panel">
          <h4>Instant Message Generator</h4>
          <p>Auto-creates a WhatsApp-ready message using the client‚Äôs goal, business, and key details.</p>
        </div>
        <div class="panel">
          <h4>Offline-First Storage</h4>
          <p>Leads are stored locally for speed and export ‚Äî ideal for daily follow-up workflows.</p>
        </div>
      </div>
    </section>
    <section id="proof">
      <div class="secHead">
        <div>
          <h3><span data-lang="EN">Case Studies</span><span data-lang="SI" style="display:none">‡∂ö‡∑ö‡∑É‡∑ä ‡∑É‡∑ä‡∂ß‡∂©‡∑ì‡∑É‡∑ä</span></h3>
          <p>Selected performance snapshots from paid media and growth work ‚Äî structured testing, clean funnels, and
            disciplined optimization.</p>
        </div>
      </div>
      <div class="grid3">
        <div class="case">
          <div class="caseTop">
            <h4>Local Retail ‚Äî ‚ÄúWhatsApp Leads at Scale‚Äù</h4>
            <span class="badge">Meta Lead ‚Üí WhatsApp</span>
          </div>
          <p style="margin:10px 0 0; color: rgba(255,255,255,.74); font-size:13px; line-height:1.65">
            Rebuilt campaign structure with audience exclusions + stronger hooks + retargeting.
            Focused on lowering CPL while increasing lead quality.
          </p>
          <div aria-label="Metrics" class="metrics">
            <div class="m">
              <div class="n">-38%</div>
              <div class="l">Cost per Lead</div>
            </div>
            <div class="m">
              <div class="n">+2.1x</div>
              <div class="l">Qualified Leads</div>
            </div>
            <div class="m">
              <div class="n">4.6%</div>
              <div class="l">CTR (Link)</div>
            </div>
          </div>
          <div class="note">Approach: creative testing (5 angles) ‚Üí winners scaled; retargeting stacked by intent
            (3-day/14-day/30-day).</div>
        </div>
        <div class="case">
          <div class="caseTop">
            <h4>Service Business ‚Äî ‚ÄúConversion Campaign Upgrade‚Äù</h4>
            <span class="badge">Website Conversion</span>
          </div>
          <p style="margin:10px 0 0; color: rgba(255,255,255,.74); font-size:13px; line-height:1.65">
            Improved landing page messaging alignment and installed clean tracking.
            Shifted from broad targeting to value-based retargeting + lookalikes.
          </p>
          <div aria-label="Metrics" class="metrics">
            <div class="m">
              <div class="n">+64%</div>
              <div class="l">Conversion Rate</div>
            </div>
            <div class="m">
              <div class="n">-27%</div>
              <div class="l">CPA</div>
            </div>
            <div class="m">
              <div class="n">3.9x</div>
              <div class="l">ROAS</div>
            </div>
          </div>
          <div class="note">Approach: pixel + events ‚Üí funnel reporting; creative refresh every 10‚Äì14 days.</div>
        </div>
        <div class="case">
          <div class="caseTop">
            <h4>Brand Growth ‚Äî ‚ÄúReels + Ads Sync‚Äù</h4>
            <span class="badge">Creative System</span>
          </div>
          <p style="margin:10px 0 0; color: rgba(255,255,255,.74); font-size:13px; line-height:1.65">
            Built a content loop where organic reels inform ad winners.
            Used engagement audiences to reduce cost and speed up learning.
          </p>
          <div aria-label="Metrics" class="metrics">
            <div class="m">
              <div class="n">+118%</div>
              <div class="l">Reach</div>
            </div>
            <div class="m">
              <div class="n">+52%</div>
              <div class="l">Engagement</div>
            </div>
            <div class="m">
              <div class="n">-22%</div>
              <div class="l">CPM</div>
            </div>
          </div>
          <div class="note">Approach: reels hooks library + weekly iteration; best-performing hooks promoted with ads.
          </div>
        </div>
      </div>
    </section>

    <section id="pricing">
      <div class="secHead">
        <div>
          <h3>Packages & Rates</h3>
          <p>Clear tiers. No confusion. Scalable growth paths.</p>
        </div>
      </div>

      <div class="pricing-grid">

        <div class="price tier basic">
          <div class="tier-head">
            <h4>Paid Ads Campaign</h4>
            <span class="tier-tag">Ads Only</span>
          </div>
          <div class="tier-body">
            <div class="tier-row">
              <div>
                <h5>One-Time Ad Campaign</h5>
                <p>Valid for 1 week</p>
              </div>
              <div class="price-tag">Rs. 1,500</div>
            </div>
          </div>
          <div class="tier-foot">
            <p>Management fee only. Ad spend paid separately.</p>
            <a class="btn" href="#audit">Run Campaign</a>
          </div>
        </div>


        <!-- BASIC MANAGEMENT -->
        <div class="price tier basic">
          <div class="tier-head">
            <h4>Social Media Management</h4>
            <span class="tier-tag">Management Only</span>
          </div>
          <div class="tier-body">
            <div class="tier-row">
              <div>
                <h5>Facebook & Instagram</h5>
                <p>Content planning, posting & engagement</p>
              </div>
              <div class="price-tag">Rs. 25,000</div>
            </div>
            <div class="tier-row">
              <div>
                <h5>Facebook, Instagram & TikTok</h5>
                <p>Multi-platform content & reach</p>
              </div>
              <div class="price-tag">Rs. 30,000</div>
            </div>
          </div>
          <div class="tier-foot">
            <p>Ads are not included. Ideal for organic presence & brand consistency.</p>
            <a class="btn" href="#audit">Start with Audit</a>
          </div>
        </div>

        <!-- STARTER -->
        <div class="price tier starter">
          <div class="tier-head">
            <h4>Starter Growth</h4>
            <span class="tier-tag highlight">Most Chosen</span>
          </div>
          <div class="tier-body">
            <h5>Social Media Management + Meta Ads</h5>
            <p>Facebook & Instagram</p>
            <div class="price-tag big">Rs. 30,000 / month</div>
            <ul class="clean">
              <li>Content management</li>
              <li>Meta Ads campaign setup & optimization</li>
              <li>Lead-focused strategy</li>
            </ul>
          </div>
          <div class="tier-foot">
            <p>Paid Ads include <b>management fee only</b>. Ad spend is paid separately.</p>
            <a class="btn primary" href="#audit">Choose Starter</a>
          </div>
        </div>

        <!-- GROWTH -->
        <div class="price tier growth">
          <div class="tier-head">
            <h4>Growth Package</h4>
          </div>
          <div class="tier-body">
            <h5>Social Media + Meta Ads</h5>
            <p>Facebook, Instagram & TikTok</p>
            <div class="price-tag big">Rs. 30,000 / month</div>
            <ul class="clean">
              <li>Multi-platform management</li>
              <li>Advanced Meta Ads optimization</li>
              <li>Creative testing & scaling</li>
            </ul>
          </div>
          <div class="tier-foot">
            <p>Paid Ads include <b>management fee only</b>. Ad spend is paid separately.</p>
            <a class="btn primary" href="#audit">Scale with Growth</a>
          </div>
        </div>

        <!-- PREMIUM -->
        <div class="price tier premium">
          <div class="tier-head">
            <h4>Premium ‚Äì Done For You</h4>
          </div>
          <div class="tier-body">
            <h5>All Platforms + Meta Ads</h5>
            <p>Full creative & ad execution</p>
            <div class="price-tag big">Rs. 45,000 / month</div>
            <ul class="clean">
              <li>All social media platforms</li>
              <li>Meta Ads campaign included</li>
              <li>Artwork & video content included</li>
              <li>High-intent lead generation</li>
            </ul>
          </div>
          <div class="tier-foot">
            <p>Paid Ads include <b>management fee only</b>. Ad spend is paid separately.</p>
            <a class="btn primary" href="#audit">Go Premium</a>
          </div>
        </div>

      </div>
    </section>

    <section id="projects">
      <div class="secHead">
        <div>
          <h3><span data-lang="EN">Signature Projects (3)</span><span data-lang="SI" style="display:none">‡∂¥‡∑ä‚Äç‡∂ª‡∂∞‡∑è‡∂±
              ‡∂¥‡∑ä‚Äç‡∂ª‡∑ú‡∂¢‡∑ô‡∂ö‡∑ä‡∂ß‡∑ä (3)</span></h3>
          <p>High-impact project ideas you can present to clients immediately (premium positioning + clear
            deliverables).</p>
        </div>
      </div>
      <div class="grid3">
        <div class="panel">
          <h4>Project 01 ‚Äî ‚ÄúLead Engine Sprint‚Äù (14 days)</h4>
          <p>Rapid lead-gen build with a test plan designed to find winners fast.</p>
          <ul>
            <li>3 campaign structures + 2 retargeting layers</li>
            <li>10 creatives (reels + static) with different angles</li>
            <li>KPI dashboard + weekly action plan</li>
          </ul>
        </div>
        <div class="panel">
          <h4>Project 02 ‚Äî ‚ÄúConversion Upgrade Kit‚Äù</h4>
          <p>Fix tracking + messaging mismatch. Increase conversion rate with funnel alignment.</p>
          <ul>
            <li>Pixel/events checklist + conversion API readiness</li>
            <li>Landing page copy improvement (hero, proof, CTA)</li>
            <li>Audience restructuring + exclusions</li>
          </ul>
        </div>
        <div class="panel">
          <h4>Project 03 ‚Äî ‚ÄúContent-to-Ads System‚Äù (Monthly)</h4>
          <p>Organic content becomes an ad testing machine. Scale only what the audience proves.</p>
          <ul>
            <li>Reels hook library + script templates</li>
            <li>Weekly creative iteration (winners ‚Üí ads)</li>
            <li>Engagement audiences + retargeting</li>
          </ul>
        </div>
      </div>
    </section>
    <section id="testimonials">
      <div class="secHead">
        <div>
          <h3><span data-lang="EN">Testimonials</span><span data-lang="SI" style="display:none">‡∂¥‡∑ä‚Äç‡∂ª‡∂≠‡∑í‡∂†‡∑è‡∂ª</span></h3>
          <p>Client feedback from recent work across Colombo and suburbs ‚Äî clarity, responsiveness, and measurable
            outcomes.</p>
        </div>
      </div>
      <div class="grid2">
        <div class="quote">
          <p>‚ÄúGimhan is an exceptional professional with a passion for learning and a positive attitude. During our short-term project, he demonstrated remarkable dedication and delivered all tasks within the set timelines. His technical skills, combined with a commitment to excellence, make him a valuable asset to any team. Gimhan's willingness to adapt to new technologies and collaborative nature create a harmonious work environment. I highly recommend him for any development role as he continues to excel and make a significant impact in his future endeavors.‚Äù</p>
          <div class="who">‚Äî Prasanna Andradi, Entrepreneur & Technology Professional | Cloud-First Products, Scalable IT Systems & Creative Digital Media</div>
        </div>
        <div class="quote">
          <p>‚ÄúWe truly appreciate the trust and support of Mr. Danuka Fernando, Owner of Prius Mahagedara. Working with him has been a pleasure‚Äîhis clear vision, professionalism, and commitment to quality made the collaboration smooth and impactful. We‚Äôre grateful for the opportunity to support Prius Mahagedara‚Äôs growth and look forward to continuing a strong, successful partnership.‚Äù</p>
          <div class="who">‚Äî Danuka Fernando, CEO & Managing Director of Prius Mahagedara PVT LTD (Kalutara)</div>
        </div>
      </div>
    </section>
    <section id="audit">
      <div class="secHead">
        <div>
          <h3><span data-lang="EN">Free Audit Automation</span><span data-lang="SI" style="display:none">‡∂±‡∑ú‡∂∏‡∑í‡∂Ω‡∑ö Audit ‡∂ë‡∂ö
              (Automation)</span></h3>
          <p>This is a built-in mini automation system: it collects leads, generates WhatsApp + Email messages
            automatically, stores leads locally, and lets you export a CSV list.</p>
        </div>
      </div>
      <div class="form">
        <div class="row">
          <div>
            <label for="name">Your Name</label>
            <input autocomplete="name" id="name" placeholder="Ex: Nimal Perera" />
          </div>
          <div>
            <label for="phone">Phone / WhatsApp</label>
            <input autocomplete="tel" id="phone" placeholder="Ex: 07X XXX XXXX" />
          </div>
        </div>
        <div class="row" style="margin-top:12px">
          <div>
            <label for="biz">Business / Brand</label><label for="industry">Industry</label><select id="industry">
              <option>Service</option>
              <option>Retail</option>
              <option>E-commerce</option>
              <option>Other</option>
            </select>
            <input id="biz" placeholder="Ex: ABC Hardware" />
          </div>
          <div>
            <label for="goal">Goal</label>
            <select id="goal">
              <option value="More leads">More leads</option>
              <option value="More sales">More sales</option>
              <option value="Brand awareness">Brand awareness</option>
              <option value="Better ROAS">Better ROAS</option>
              <option value="Social growth">Social growth</option>
            </select>
          </div>
        </div>
        <div class="row" style="margin-top:12px">
          <div>
            <label for="pkg">Package Preference (optional)</label>
            <select id="pkg">
              <option value="">Select package (optional)</option>
              <option value="Social Media Management (01 Month) ‚Äî Facebook + Instagram ‚Äî Rs. 25,000">SMM 1M (FB+IG) ‚Äî
                10,000</option>
              <option value="Social Media Management (01 Month) ‚Äî Facebook + Instagram + TikTok ‚Äî Rs. 30,000">SMM 1M
                (FB+IG+TikTok) ‚Äî 30,000</option>
              <option value="Paid Ads Campaign ‚Äî 01 time (valid 1 week) ‚Äî Rs. 1,500 (management fee only)">Ads 1 Week ‚Äî
                1,200</option>
              <option value="Paid Ads Campaign ‚Äî Monthly ‚Äî Rs. 6,500 (management fee only)">Ads Monthly ‚Äî 6,500</option>
              <option value="Combo 01 (01 Month) ‚Äî SMM + Ad Campaign ‚Äî FB+IG ‚Äî Rs. 25,000 (management fee only)">Combo
                25,000</option>
              <option value="Combo 02 (01 Month) ‚Äî SMM + Ad Campaign ‚Äî FB+IG+TikTok ‚Äî Rs. 30,000 (management fee only)">
                Combo 30,000</option>
              <option
                value="Combo 03 (01 Month) ‚Äî All social + Meta Ads Campaign + Artwork &amp; Video included ‚Äî Rs. 45,000 (management fee only)">
                Combo 45,000</option>
            </select>
          </div>
          <div>
            <label for="budget">Monthly Ad Spend Budget (optional)</label>
            <input id="budget" placeholder="Ex: Rs. 30,000 / Rs. 50,000" />
          </div>
        </div>
        <div style="margin-top:12px">
          <label for="msg">What are you currently doing? (budget / offer / location)</label>
          <textarea id="msg" placeholder="Tell me what you sell, your budget range, and your target area."></textarea>
        </div>
        <div class="formActions">
          <button class="btn primary" id="submitLead" type="button">
            <span aria-hidden="true" class="icon">‚ö°</span> Generate WhatsApp + Save Lead
          </button>
          <button class="btn" id="copyMsg" type="button">
            <span aria-hidden="true" class="icon">üìã</span> Copy Message
          </button>
          <button class="btn" id="downloadCSV" type="button">
            <span aria-hidden="true" class="icon">‚¨áÔ∏è</span> Export Leads CSV
          </button>
          <button class="btn" id="downloadICS" type="button">
            <span aria-hidden="true" class="icon">üóìÔ∏è</span> Create Calendar Invite
          </button>
        </div>
        <div class="hint">This audit request generates an instant WhatsApp message and stores the request on this device
          for quick follow-up.</div>
      </div>
    </section>
    <section id="tracking">
      <div class="secHead">
        <div>
          <h3>Tracking Setup</h3>
          <p>Add your tracking IDs (stored locally)</p>
        </div>
      </div>
      <div class="panel">
        <div class="row">
          <div><label>Meta Pixel ID</label><input id="pixelId" placeholder="1234567890" /></div>
          <div><label>Google Analytics 4 ID</label><input id="gaId" placeholder="G-XXXXXXX" /></div>
        </div>
        <button class="btn primary" id="saveTracking" type="button">Save</button>
      </div>
    </section>
    <section id="contact">
      <div class="secHead">
        <div>
          <h3><span data-lang="EN">Contact</span><span data-lang="SI" style="display:none">‡∑É‡∂∏‡∑ä‡∂∂‡∂±‡∑ä‡∂∞ ‡∑Ä‡∂±‡∑ä‡∂±</span></h3>
          <p>Direct channels (fast response): WhatsApp or email. LinkedIn included for credibility.</p>
        </div>
      </div>
      <div class="grid3">
        <div class="panel">
          <h4>WhatsApp / Phone</h4>
          <p class="mono">+94(0) 76 8 616 628</p>
          <div class="pillRow">
            <a class="pill" href="#" id="waLink">Open WhatsApp</a>
            <a class="pill" href="tel:+94768616628">Call</a>
          </div>
        </div>
        <div class="panel">
          <h4>Email</h4>
          <p class="mono">gimhanpabasara4@gmail.com</p>
          <div class="pillRow">
            <a class="pill" href="mailto:gimhanpabasara4@gmail.com">Send Email</a>
            <a class="pill" href="#" id="copyEmail">Copy Email</a>
          </div>
        </div>
        <div class="panel">
          <h4>Social</h4>
          <p>Facebook: <b>Gimhan Pabasara</b><br />LinkedIn: <b>Gimhan Pabasara</b></p>
          <div class="pillRow">
            <a class="pill" href="https://www.linkedin.com/in/gimhanpabasara/"
              rel="noopener" target="_blank">Open LinkedIn</a>
          </div>
        </div>
      </div>
    </section>
    <footer>
      <div class="frow">
        <div>¬© <span id="year"></span> Gimhan Pabasara ‚Äî Software Engineer &amp; Digital Marketer</div>
        <div class="mono">Built for speed ‚Ä¢ clean UI ‚Ä¢ conversion-first</div>
      </div>
    </footer>
  </div>
  <div aria-label="Quick actions" class="sticky" role="region">
    <div class="left">
      <div aria-hidden="true" class="spark"></div>
      <div class="t">
        <b>Want more leads in the next 30 days?</b>
        <span>Free audit ‚Üí campaign plan ‚Üí execution ‚Ä¢ <b id="slotBadgeMini" style="font-weight:600">Limited
            slots</b></span>
      </div>
    </div>
    <div class="right">
      <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap">
        <select aria-label="Select package" id="pkgSelect"
          style="padding:10px 12px;border-radius:999px;border:1px solid rgba(255,255,255,.16);background:rgba(255,255,255,.06);color:rgba(255,255,255,.92);font-size:12px;max-width:260px">
          <option value="">Select package (optional)</option>
          <option value="Social Media Management (01 Month) ‚Äî Facebook + Instagram ‚Äî Rs. 25,000">SMM 1M (FB+IG) ‚Äî 25,000
          </option>
          <option value="Social Media Management (01 Month) ‚Äî Facebook + Instagram + TikTok ‚Äî Rs. 30,000">SMM 1M
            (FB+IG+TikTok) ‚Äî 30,000</option>
          <option value="Paid Ads Campaign ‚Äî 01 time (valid 1 week) ‚Äî Rs. 1,500 (management fee only)">Ads 1 Week ‚Äî
            1,500</option>
          <option value="Paid Ads Campaign ‚Äî Monthly ‚Äî Rs. 6,500 (management fee only)">Ads Monthly ‚Äî 6,500</option>
          <option value="Combo 01 (01 Month) ‚Äî SMM + Ad Campaign ‚Äî FB+IG ‚Äî Rs. 25,000 (management fee only)">Combo
            25,000</option>
          <option value="Combo 02 (01 Month) ‚Äî SMM + Ad Campaign ‚Äî FB+IG+TikTok ‚Äî Rs. 30,000 (management fee only)">
            Combo 30,000</option>
          <option
            value="Combo 03 (01 Month) ‚Äî All social + Meta Ads Campaign + Artwork &amp; Video included ‚Äî Rs. 45,000 (management fee only)">
            Combo 45,000</option>
        </select>
      </div>
      <button class="chip primary" id="openAuditModal" type="button">Get Free Audit</button>
      <a class="chip" href="#" id="stickyWA">WhatsApp</a>
      <a class="chip" href="#pricing">See Packages</a>
    </div>
  </div>
  <div aria-atomic="true" aria-live="polite" class="toast" id="toast">
    <b id="toastTitle">Saved</b>
    <span id="toastBody">Done.</span>
  </div>
  <script>
    // ====== Config (edit if needed) ======
    const CONTACT = {
      name: "Gimhan Pabasara",
      phoneDisplay: "0768616628",
      phoneE164: "+94768616628",
      whatsappE164: "94768616628",
      email: "gimhanpabasara4@gmail.com",
      linkedin: "https://www.linkedin.com/in/gimhanpabasara/",
      facebookLabel: "Gimhan Pabasara"
    };

    // ====== Helpers ======
    const $ = (id) => document.getElementById(id);
    const toast = (title, body) => {
      $("toastTitle").textContent = title;
      $("toastBody").textContent = body;
      $("toast").classList.add("show");
      setTimeout(() => $("toast").classList.remove("show"), 2200);
    };
    const safe = (s) => (s || "").toString().trim();

    const buildLeadMessage = (lead) => {
      const lines = [
        `Hi ${CONTACT.name},`,
        `I'm ${lead.name || "a potential client"} (${lead.phone || "no phone provided"}).`,
        `Business: ${lead.biz || "-"}`,
        `Goal: ${lead.goal || "-"}`,
        lead.pkg ? `Package: ${lead.pkg}` : "",
        lead.budget ? `Ad Spend Budget (approx): ${lead.budget}` : "",
        lead.msg ? `Details: ${lead.msg}` : "",
        "",
        "Note: Paid Ad Campaigns are charged as a management fee only. Ad spend is paid separately by the client.",
        "",
        "Please share the best next steps. Thank you!"
      ].filter(Boolean);

      return lines.join("\n");
    };

    const waUrl = (message) => {
      const txt = encodeURIComponent(message);
      return `https://wa.me/${CONTACT.whatsappE164}?text=${txt}`;
    };

    const mailtoUrl = (subject, body) => {
      return `mailto:${CONTACT.email}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
    };

    const saveLead = (lead) => {
      const key = "tharindu_leads_v1";
      const existing = JSON.parse(localStorage.getItem(key) || "[]");
      existing.unshift(lead);
      localStorage.setItem(key, JSON.stringify(existing));
      return existing;
    };

    const downloadText = (filename, text, mime = "text/plain") => {
      const blob = new Blob([text], { type: mime });
      const a = document.createElement("a");
      a.href = URL.createObjectURL(blob);
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      a.remove();
      setTimeout(() => URL.revokeObjectURL(a.href), 1200);
    };

    const toCSV = (rows) => {
      const header = ["timestamp", "name", "phone", "business", "goal", "message"];
      const esc = (v) => `"${String(v ?? "").replaceAll('"', '""')}"`;
      const lines = [header.join(",")];
      for (const r of rows) {
        lines.push([
          r.ts, r.name, r.phone, r.biz, r.goal, r.msg
        ].map(esc).join(","));
      }
      return lines.join("\n");
    };

    const makeVCard = () => {
      // Minimal vCard 3.0
      return [
        "BEGIN:VCARD",
        "VERSION:3.0",
        `FN:${CONTACT.name}`,
        `TEL;TYPE=CELL:${CONTACT.phoneDisplay}`,
        `EMAIL;TYPE=INTERNET:${CONTACT.email}`,
        `URL:${CONTACT.linkedin}`,
        "END:VCARD"
      ].join("\n");
    };

    const makeICS = ({ title, description }) => {
      // 30-min slot, starts 2 hours from now
      const dt = new Date(Date.now() + (2 * 60 * 60 * 1000));
      const end = new Date(dt.getTime() + (30 * 60 * 1000));

      const fmt = (d) => {
        const pad = (n) => String(n).padStart(2, "0");
        // UTC format
        return d.getUTCFullYear() +
          pad(d.getUTCMonth() + 1) +
          pad(d.getUTCDate()) + "T" +
          pad(d.getUTCHours()) +
          pad(d.getUTCMinutes()) +
          pad(d.getUTCSeconds()) + "Z";
      };

      const uid = "audit-" + Math.random().toString(16).slice(2) + "@tharindu";
      return [
        "BEGIN:VCALENDAR",
        "VERSION:2.0",
        "PRODID:-//Tharindu Jayasekara//Audit Booking//EN",
        "BEGIN:VEVENT",
        `UID:${uid}`,
        `DTSTAMP:${fmt(new Date())}`,
        `DTSTART:${fmt(dt)}`,
        `DTEND:${fmt(end)}`,
        `SUMMARY:${title}`,
        `DESCRIPTION:${description.replaceAll("\n", "\\n")}`,
        "END:VEVENT",
        "END:VCALENDAR"
      ].join("\n");
    };

    // ====== Wire up quick buttons ======
    const defaultMessage = `Hi ${CONTACT.name}, I want to start a paid ads campaign. Please guide me with packages + next steps.`;
    const waDefault = waUrl(defaultMessage);

    $("btnWhatsApp").href = waDefault;
    $("stickyWA").href = waDefault;
    $("waLink").href = waDefault;

    $("btnEmail").href = mailtoUrl("Digital Marketing Inquiry", defaultMessage);


    const getSelectedPkg = () => {
      const s1 = document.getElementById("pkgSelect");
      const s2 = document.getElementById("pkg");
      return (s2 && s2.value) || (s1 && s1.value) || "";
    };

    const setDefaultWA = () => {
      const pkg = getSelectedPkg();
      const msg = pkg
        ? `Hi ${CONTACT.name}, I‚Äôm interested in: ${pkg}. Please guide me with packages + next steps.\n\nNote: Paid Ad Campaigns are charged as a management fee only. Ad spend is paid separately.`
        : defaultMessage;

      const url = waUrl(msg);
      $("btnWhatsApp").href = url;
      $("stickyWA").href = url;
      $("waLink").href = url;
    };

    const s = document.getElementById("pkgSelect");
    if (s) {
      s.addEventListener("change", () => {
        // keep audit form in sync if present
        const s2 = document.getElementById("pkg");
        if (s2 && !s2.value) s2.value = s.value;
        setDefaultWA();
        toast("Package Selected", "WhatsApp message updated.");
      });
    }
    setDefaultWA();
    const s2 = document.getElementById("pkg");
    if (s2) {
      s2.addEventListener("change", () => {
        setDefaultWA();
      });
    }


    $("btnDownloadVcard").addEventListener("click", () => {
      downloadText("Tharindu_Jayasekara.vcf", makeVCard(), "text/vcard");
      toast("Contact Saved", "Downloaded vCard file.");
    });

    $("copyEmail").addEventListener("click", async () => {
      try {
        await navigator.clipboard.writeText(CONTACT.email);
        toast("Copied", "Email copied to clipboard.");
      } catch (e) {
        toast("Copy failed", "Your browser blocked clipboard access.");
      }
    });

    // ====== Automation Form ======
    let lastMessage = defaultMessage;

    $("submitLead").addEventListener("click", () => {
      const lead = {
        ts: new Date().toISOString(),
        name: safe($("name").value),
        phone: safe($("phone").value),
        biz: safe($("biz").value),
        goal: safe($("goal").value),
        msg: safe($("msg").value),
        pkg: safe($("pkg").value),
        budget: safe($("budget").value)
      };

      const msg = buildLeadMessage(lead);
      lastMessage = msg;

      saveLead(lead);

      // Open WhatsApp with generated message
      window.open(waUrl(msg), "_blank", "noopener");

      toast("Lead Saved", "WhatsApp message generated and lead stored locally.");
    });

    $("copyMsg").addEventListener("click", async () => {
      try {
        await navigator.clipboard.writeText(lastMessage);
        toast("Copied", "Generated message copied to clipboard.");
      } catch (e) {
        toast("Copy failed", "Your browser blocked clipboard access.");
      }
    });

    $("downloadCSV").addEventListener("click", () => {
      const key = "tharindu_leads_v1";
      const rows = JSON.parse(localStorage.getItem(key) || "[]");
      if (!rows.length) {
        toast("No Leads", "No saved leads yet. Use the form first.");
        return;
      }
      downloadText("tharindu_leads.csv", toCSV(rows), "text/csv");
      toast("Exported", "Leads CSV downloaded.");
    });

    $("downloadICS").addEventListener("click", () => {
      const title = "Free Marketing Audit ‚Äî Tharindu Jayasekara";
      const desc = [
        "Audit call agenda:",
        "1) Offer + target audience",
        "2) Current ads / pages / tracking",
        "3) Quick wins + plan",
        "",
        `Contact: ${CONTACT.phoneDisplay} | ${CONTACT.email}`,
        `LinkedIn: ${CONTACT.linkedin}`
      ].join("\n");

      const ics = makeICS({ title, description: desc });
      downloadText("audit_booking.ics", ics, "text/calendar");
      toast("Calendar Invite", "Downloaded .ics file (open to add to your calendar).");
    });

    // Footer year
    $("year").textContent = new Date().getFullYear();

    // =========================
    // V7: Package library + Smart WhatsApp routing
    // =========================
    const PKG_LIBRARY = {
      "Combo 25,000": {
        key: "Combo 25,000",
        label: "Combo 01 (01 Month) ‚Äî FB+IG ‚Äî Rs. 15,000",
        includes: ["Social Media Management", "Ad Campaign management"],
        notes: ["Paid Ad Campaigns include management fee only. Ad spend is paid separately by the client."],
        bestFor: "Starter growth + consistent inquiries"
      },
      "Combo 30,000": {
        key: "Combo 30,000",
        label: "Combo 02 (01 Month) ‚Äî FB+IG+TikTok ‚Äî Rs. 25,000",
        includes: ["Social Media Management", "Ad Campaign management"],
        notes: ["Paid Ad Campaigns include management fee only. Ad spend is paid separately by the client."],
        bestFor: "Growth with TikTok + Meta"
      },
      "Combo 45,000": {
        key: "Combo 45,000",
        label: "Combo 03 (01 Month) ‚Äî All social + Meta Ads Campaign + Artwork & Video included ‚Äî Rs. 35,000",
        includes: ["All social media platforms", "Meta Ads Campaign included", "Artwork & Video included"],
        notes: ["Paid Ad Campaigns include management fee only. Ad spend is paid separately by the client."],
        bestFor: "Premium done-for-you scaling"
      }
    };

    const normalizePkg = (raw) => {
      const v = (raw || "").toLowerCase();
      if (v.includes("45,000") || v.includes("35000")) return "Combo 45,000";
      if (v.includes("30,000") || v.includes("25000")) return "Combo 30,000";
      if (v.includes("25,000") || v.includes("15000")) return "Combo 25,000";
      return raw || "";
    };

    const detectClientType = (bizText = "") => {
      const t = (bizText || "").toLowerCase();
      if (/(shop|store|hardware|pharmacy|boutique|salon|restaurant|cafe|bakery)/.test(t)) return "Retail/Local shop";
      if (/(hotel|tour|travel|rent|service|clinic|law|construction|repair)/.test(t)) return "Service business";
      if (/(ecom|e-commerce|online|delivery|brand|fashion|cosmetic)/.test(t)) return "Brand/E-commerce";
      return "General";
    };

    const scoreAudit = (a) => {
      // simple, transparent scoring (0‚Äì100)
      let s = 0;
      if (a.offerClarity === "clear") s += 25;
      if (a.creatives === "yes") s += 20;
      if (a.followup === "yes") s += 15;
      if (a.budget === "30k+") s += 25;
      if (a.budget === "10k-30k") s += 15;
      if (a.goal === "sales") s += 10;
      if (a.goal === "leads") s += 10;
      return Math.min(100, s);
    };

    const readinessLabel = (score) => {
      if (score >= 70) return { tag: "Ready to Scale", color: "rgba(163,230,53,.18)" };
      if (score >= 45) return { tag: "Needs Guidance", color: "rgba(249,115,22,.18)" };
      return { tag: "Not Ready Yet", color: "rgba(239,68,68,.18)" };
    };

    const buildSmartWA = ({ lead, audit }) => {
      const pkgKey = normalizePkg(lead.pkg) || "";
      const pkgText = pkgKey ? (PKG_LIBRARY[pkgKey]?.label || lead.pkg) : (lead.pkg || "");
      const type = detectClientType(`${lead.biz} ${lead.msg}`);
      const score = audit?.score ?? null;
      const r = score !== null ? readinessLabel(score) : null;

      const lines = [
        `Hi ${CONTACT.name},`,
        `I'm ${lead.name || "a potential client"} (${lead.phone || "no phone provided"}).`,
        lead.biz ? `Business: ${lead.biz}` : "",
        `Client type: ${type}`,
        lead.goal ? `Goal: ${lead.goal}` : "",
        pkgText ? `Interested package: ${pkgText}` : "",
        lead.budget ? `Ad spend budget (approx): ${lead.budget}` : "",
        lead.msg ? `Details: ${lead.msg}` : "",
        "",
        "Note: Paid Ad Campaigns are charged as a management fee only. Ad spend is paid separately by the client.",
        score !== null ? `Readiness score: ${score}/100 (${r.tag})` : "",
        "",
        "Please confirm availability and the next steps. Thank you!"
      ].filter(Boolean);

      return lines.join("\n");
    };

    // =========================
    // V7: AI Pre‚ÄëAudit Wizard
    // =========================
    const auditState = {
      step: 0,
      data: {
        goal: "leads",
        budget: "10k-30k",
        offerClarity: "clear",
        creatives: "yes",
        followup: "yes"
      }
    };

    const AUDIT_STEPS = [
      {
        key: "goal",
        title: "Primary goal",
        render: () => `
          <div class="panel">
            <h4>What do you want most right now?</h4>
            <div class="pillRow" style="margin-top:10px">
              <button class="pill" data-audit="goal" data-val="leads">More leads / inquiries</button>
              <button class="pill" data-audit="goal" data-val="sales">More sales</button>
              <button class="pill" data-audit="goal" data-val="awareness">Brand awareness</button>
              <button class="pill" data-audit="goal" data-val="roas">Better ROAS</button>
            </div>
          </div>`
      },
      {
        key: "budget",
        title: "Monthly ad spend budget",
        render: () => `
          <div class="panel">
            <h4>Ad spend (client-paid) budget range?</h4>
            <div class="pillRow" style="margin-top:10px">
              <button class="pill" data-audit="budget" data-val="<10k">Less than Rs. 10,000</button>
              <button class="pill" data-audit="budget" data-val="10k-30k">Rs. 10,000 ‚Äì 30,000</button>
              <button class="pill" data-audit="budget" data-val="30k+">Rs. 30,000+</button>
            </div>
          </div>`
      },
      {
        key: "offerClarity",
        title: "Offer clarity",
        render: () => `
          <div class="panel">
            <h4>Is your offer/pricing clear?</h4>
            <div class="pillRow" style="margin-top:10px">
              <button class="pill" data-audit="offerClarity" data-val="clear">Yes, clear</button>
              <button class="pill" data-audit="offerClarity" data-val="partial">Somewhat</button>
              <button class="pill" data-audit="offerClarity" data-val="no">Not yet</button>
            </div>
          </div>`
      },
      {
        key: "creatives",
        title: "Creative readiness",
        render: () => `
          <div class="panel">
            <h4>Can you provide photos/videos OR allow us to create them?</h4>
            <div class="pillRow" style="margin-top:10px">
              <button class="pill" data-audit="creatives" data-val="yes">Yes</button>
              <button class="pill" data-audit="creatives" data-val="no">Not right now</button>
            </div>
          </div>`
      },
      {
        key: "followup",
        title: "Follow-up",
        render: () => `
          <div class="panel">
            <h4>Can you respond to leads fast (within 5‚Äì15 minutes)?</h4>
            <div class="pillRow" style="margin-top:10px">
              <button class="pill" data-audit="followup" data-val="yes">Yes</button>
              <button class="pill" data-audit="followup" data-val="no">Not always</button>
            </div>
          </div>`
      }
    ];

    const openModal = () => {
      const m = document.getElementById("auditModal");
      if (!m) return;
      m.style.display = "flex";
      auditState.step = 0;
      renderAuditStep();
    };

    const closeModal = () => {
      const m = document.getElementById("auditModal");
      if (!m) return;
      m.style.display = "none";
    };

    const renderAuditStep = () => {
      const step = AUDIT_STEPS[auditState.step];
      document.getElementById("auditStepWrap").innerHTML = step.render();
      document.getElementById("auditProgress").textContent = `Step ${auditState.step + 1} of ${AUDIT_STEPS.length}`;

      // highlight selection
      const buttons = document.querySelectorAll("[data-audit]");
      buttons.forEach(btn => {
        const k = btn.getAttribute("data-audit");
        const v = btn.getAttribute("data-val");
        if (auditState.data[k] === v) {
          btn.style.background = "rgba(34,211,238,.16)";
          btn.style.borderColor = "rgba(34,211,238,.30)";
        }
        btn.addEventListener("click", () => {
          auditState.data[k] = v;
          toast("Saved", `${step.title}: ${btn.textContent.trim()}`);
          renderAuditStep();
        }, { once: true });
      });

      document.getElementById("auditBack").style.visibility = auditState.step === 0 ? "hidden" : "visible";
      document.getElementById("auditNext").textContent = auditState.step === AUDIT_STEPS.length - 1 ? "Generate WhatsApp" : "Next";
    };

    document.getElementById("openAuditModal")?.addEventListener("click", openModal);
    document.getElementById("closeAuditModal")?.addEventListener("click", closeModal);

    document.getElementById("auditBack")?.addEventListener("click", () => {
      if (auditState.step > 0) { auditState.step -= 1; renderAuditStep(); }
    });

    document.getElementById("auditNext")?.addEventListener("click", () => {
      if (auditState.step < AUDIT_STEPS.length - 1) {
        auditState.step += 1; renderAuditStep(); return;
      }
      // Final: compute score + suggest package
      const score = scoreAudit(auditState.data);
      const r = readinessLabel(score);

      // Suggest package (simple rule)
      let suggested = "Combo 25,000";
      if (auditState.data.budget === "30k+") suggested = "Combo 45,000";
      else if (auditState.data.budget === "10k-30k" && auditState.data.creatives === "yes") suggested = "Combo 30,000";

      // sync selector if present
      const p = document.getElementById("pkgSelect");
      if (p) p.value = PKG_LIBRARY[suggested]?.label || p.value;

      toast("Audit Result", `${r.tag} ‚Ä¢ Suggested: ${suggested}`);
      closeModal();

      // Jump to audit section and pre-fill package & budget
      const pkgEl = document.getElementById("pkg");
      const budEl = document.getElementById("budget");
      if (pkgEl) pkgEl.value = PKG_LIBRARY[suggested]?.label || pkgEl.value;
      if (budEl) {
        budEl.value = auditState.data.budget === "30k+" ? "Rs. 30,000+" :
          auditState.data.budget === "10k-30k" ? "Rs. 10,000 ‚Äì 30,000" : "Below Rs. 10,000";
      }

      // If they already typed name/phone/biz, generate WA now
      const lead = {
        ts: new Date().toISOString(),
        name: safe($("name").value),
        phone: safe($("phone").value),
        biz: safe($("biz").value),
        goal: safe($("goal").value) || auditState.data.goal,
        msg: safe($("msg").value),
        pkg: (pkgEl?.value || PKG_LIBRARY[suggested]?.label || ""),
        budget: (budEl?.value || "")
      };

      const msg = buildSmartWA({ lead, audit: { score } });
      lastMessage = msg;
      saveLead({ ...lead, score, status: "New" });
      window.open(waUrl(msg), "_blank", "noopener");
      toast("Generated", "WhatsApp message created with audit score.");
      renderLeadDesk();
    });

    // =========================
    // V7: Lead Desk + Follow-up flag
    // =========================
    const LEAD_KEY = "tharindu_leads_v1";

    const getLeads = () => JSON.parse(localStorage.getItem(LEAD_KEY) || "[]");

    const setLeadStatus = (ts, status) => {
      const rows = getLeads();
      const i = rows.findIndex(r => r.ts === ts);
      if (i >= 0) {
        rows[i].status = status;
        localStorage.setItem(LEAD_KEY, JSON.stringify(rows));
      }
      renderLeadDesk();
    };

    const needsFollowup = (ts) => {
      const ageMs = Date.now() - new Date(ts).getTime();
      return ageMs > (48 * 60 * 60 * 1000);
    };

    const renderLeadDesk = () => {
      const tbody = document.getElementById("leadTableBody");
      if (!tbody) return;
      const rows = getLeads();

      tbody.innerHTML = rows.slice(0, 50).map(r => {
        const fu = needsFollowup(r.ts) ? "‚ö†Ô∏è Follow-up" : "‚Äî";
        const score = (typeof r.score === "number") ? `${r.score}/100` : "‚Äî";
        const pkg = normalizePkg(r.pkg) || (r.pkg || "‚Äî");
        const st = r.status || "New";
        return `
          <tr style="border-top:1px solid rgba(255,255,255,.08)">
            <td style="padding:10px 12px;font-size:12px;color:rgba(255,255,255,.70)">${new Date(r.ts).toLocaleString()}</td>
            <td style="padding:10px 12px;font-size:12px">${(r.name || "‚Äî")}</td>
            <td style="padding:10px 12px;font-size:12px;color:rgba(255,255,255,.80)">${pkg}</td>
            <td style="padding:10px 12px;font-size:12px">${score}</td>
            <td style="padding:10px 12px;font-size:12px">${fu}</td>
            <td style="padding:10px 12px;font-size:12px">
              <select data-status="${r.ts}" style="padding:8px 10px;border-radius:12px;border:1px solid rgba(255,255,255,.16);background:rgba(7,9,20,.35);color:rgba(255,255,255,.92);font-size:12px">
                ${["New", "Contacted", "Qualified", "Closed", "Not interested"].map(x => `<option ${x === st ? "selected" : ""}>${x}</option>`).join("")}
              </select>
            </td><td style="padding:10px 12px;font-size:12px"><select style="padding:6px;border-radius:8px"><option>Hot</option><option>Warm</option><option>Cold</option></select></td></tr>`;
      }).join("");

      document.querySelectorAll("[data-status]").forEach(sel => {
        sel.addEventListener("change", (e) => setLeadStatus(sel.getAttribute("data-status"), e.target.value), { once: true });
      });
    };

    document.getElementById("refreshLeads")?.addEventListener("click", () => { renderLeadDesk(); toast("Refreshed", "Lead desk updated."); });
    document.getElementById("clearLeads")?.addEventListener("click", () => {
      localStorage.removeItem(LEAD_KEY);
      renderLeadDesk();
      toast("Cleared", "Leads removed from this device.");
    });

    document.getElementById("exportFollowups")?.addEventListener("click", () => {
      const rows = getLeads().filter(r => needsFollowup(r.ts));
      if (!rows.length) { toast("No Follow-ups", "No leads older than 48h."); return; }
      downloadText("followups.csv", toCSV(rows), "text/csv");
      toast("Exported", "Follow-ups CSV downloaded.");
    });

    // Keep your existing submitLead flow but upgrade message generation
    const originalSubmit = document.getElementById("submitLead");
    if (originalSubmit) {
      originalSubmit.addEventListener("click", () => {
        // let existing handler run too; we overwrite lastMessage inside it, but we'll update using smart generator afterwards
        setTimeout(() => {
          const lead = {
            ts: new Date().toISOString(),
            name: safe($("name").value),
            phone: safe($("phone").value),
            biz: safe($("biz").value),
            goal: safe($("goal").value),
            msg: safe($("msg").value),
            pkg: safe(document.getElementById("pkg")?.value),
            budget: safe(document.getElementById("budget")?.value)
          };
          const msg = buildSmartWA({ lead, audit: null });
          lastMessage = msg;
        }, 0);
      }, { capture: true });
    }

    // Initial render
    renderLeadDesk();

    // =========================
    // V7: Language toggle (simple: headings)
    // =========================
    const LANG_KEY = "tharindu_lang_v1";
    const setLang = (lang) => localStorage.setItem(LANG_KEY, lang);
    const getLang = () => localStorage.getItem(LANG_KEY) || "EN";

    const DICT = {
      SI: {
        services: "‡∑É‡∑ö‡∑Ä‡∑è", proof: "Case Studies", packages: "‡∂¥‡∑ê‡∂ö‡∑ö‡∂¢", projects: "‡∂¥‡∑ä‚Äç‡∂ª‡∑ú‡∂¢‡∑ô‡∂ö‡∑ä‡∂ß‡∑ä", contact: "‡∑É‡∂∏‡∑ä‡∂∂‡∂±‡∑ä‡∂∞ ‡∑Ä‡∂±‡∑ä‡∂±",
        audit: "Free Audit", leadDesk: "Lead Desk"
      },
      EN: {}
    };

    const applyLang = () => {
      const lang = getLang();
      const btn = document.getElementById("langToggle");
      if (btn) btn.textContent = (lang === "SI") ? "English" : "‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω";
      // Minimal label updates (keep premium English copy as default)
      if (lang === "SI") {
        document.querySelector('a[href="#services"]')?.textContent && (document.querySelector('a[href="#services"]').textContent = "‡∑É‡∑ö‡∑Ä‡∑è");
        document.querySelector('a[href="#pricing"]')?.textContent && (document.querySelector('a[href="#pricing"]').textContent = "‡∂¥‡∑ê‡∂ö‡∑ö‡∂¢");
        document.querySelector('a[href="#projects"]')?.textContent && (document.querySelector('a[href="#projects"]').textContent = "‡∂¥‡∑ä‚Äç‡∂ª‡∑ú‡∂¢‡∑ô‡∂ö‡∑ä‡∂ß‡∑ä");
        document.querySelector('a[href="#contact"]')?.textContent && (document.querySelector('a[href="#contact"]').textContent = "‡∑É‡∂∏‡∑ä‡∂∂‡∂±‡∑ä‡∂∞ ‡∑Ä‡∂±‡∑ä‡∂±");
      } else {
        const mapBack = {
          '#services': "Services", '#pricing': "Packages", '#projects': "Projects", '#contact': "Contact"
        };
        Object.entries(mapBack).forEach(([href, txt]) => {
          const el = document.querySelector(`a[href="${href}"]`);
          if (el) el.textContent = txt;
        });
      }
    };

    document.getElementById("langToggle")?.addEventListener("click", () => {
      setLang(getLang() === "SI" ? "EN" : "SI");
      applyLang();
      toast("Language", getLang() === "SI" ? "‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω mode" : "English mode");
    });

    applyLang();


    // =========================
    // V7.1: Accordion for Combo packages
    // =========================
    (function bindAccordion() {
      document.querySelectorAll(".price.accordion").forEach(card => {
        const toggle = () => card.classList.toggle("open");
        card.addEventListener("click", () => toggle());
        card.addEventListener("keydown", (e) => {
          if (e.key === "Enter" || e.key === " ") { e.preventDefault(); toggle(); }
        });
      });
    })();

    // =========================
    // V7.1: Full bilingual toggle (data-lang blocks)
    // =========================
    const LANG2_KEY = "tharindu_lang2_v1";
    const setLang2 = (lang) => localStorage.setItem(LANG2_KEY, lang);
    const getLang2 = () => localStorage.getItem(LANG2_KEY) || "EN";
    const applyLang2 = () => {
      const lang = getLang2();
      document.querySelectorAll('[data-lang="EN"]').forEach(el => el.style.display = (lang === "EN") ? "" : "none");
      document.querySelectorAll('[data-lang="SI"]').forEach(el => el.style.display = (lang === "SI") ? "" : "none");
      const btn = document.getElementById("langToggle");
      if (btn) btn.textContent = (lang === "SI") ? "English" : "‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω";
    };
    // keep previous listener but ensure correct behavior
    const lt = document.getElementById("langToggle");
    if (lt) {
      lt.addEventListener("click", () => {
        setLang2(getLang2() === "SI" ? "EN" : "SI");
        applyLang2();
      }, { capture: true });
    }
    applyLang2();

    // =========================
    // V7.1: Availability badge control (local)
    // =========================
    const SLOT_KEY = "tharindu_slots_v1";
    const readSlots = () => JSON.parse(localStorage.getItem(SLOT_KEY) || '{"left":"","note":""}');
    const writeSlots = (o) => localStorage.setItem(SLOT_KEY, JSON.stringify(o));
    const renderSlots = () => {
      const s = readSlots();
      const text = s.left ? `${s.left} slots left` : "Limited slots";
      const note = s.note ? ` ‚Ä¢ ${s.note}` : "";
      const a = document.getElementById("slotBadge");
      const b = document.getElementById("slotBadgeMini");
      if (a) a.textContent = `Availability: ${text}${note}`;
      if (b) b.textContent = `${text}${note}`;
      const inp = document.getElementById("slotsLeft");
      const inp2 = document.getElementById("slotsNote");
      if (inp) inp.value = s.left || "";
      if (inp2) inp2.value = s.note || "";
    };
    document.getElementById("saveSlots")?.addEventListener("click", () => {
      const left = (document.getElementById("slotsLeft")?.value || "").trim();
      const note = (document.getElementById("slotsNote")?.value || "").trim();
      writeSlots({ left, note, ts: new Date().toISOString() });
      renderSlots();
      toast("Saved", "Availability updated.");
    });
    document.getElementById("resetSlots")?.addEventListener("click", () => {
      localStorage.removeItem(SLOT_KEY);
      renderSlots();
      toast("Reset", "Availability reset.");
    });
    renderSlots();

  </script>
  <div id="auditModal"
    style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:120;background:rgba(0,0,0,.55);backdrop-filter:blur(8px)">
    <div class="card" style="width:min(760px, calc(100% - 24px));padding:16px;border-radius:28px">
      <div style="display:flex;gap:10px;align-items:flex-start;justify-content:space-between">
        <div>
          <div class="kicker"><span aria-hidden="true" class="dot"></span> AI Pre‚ÄëAudit (60 seconds)</div>
          <h3 style="margin:10px 0 0;font-size:20px">Quick questions ‚Üí better recommendations</h3>
          <p style="margin:8px 0 0;color:rgba(255,255,255,.72);font-size:13.5px;line-height:1.6">
            Answer a few questions and we‚Äôll generate the best WhatsApp message + package suggestion.
          </p>
        </div>
        <button class="btn" id="closeAuditModal" type="button">‚úï</button>
      </div>
      <div class="divider"></div>
      <div id="auditStepWrap"></div>
      <div class="divider"></div>
      <div style="display:flex;gap:10px;flex-wrap:wrap;justify-content:space-between;align-items:center">
        <div id="auditProgress" style="color:rgba(255,255,255,.65);font-size:12px">Step 1 of 5</div>
        <div style="display:flex;gap:10px;flex-wrap:wrap">
          <button class="btn" id="auditBack" type="button">Back</button>
          <button class="btn primary" id="auditNext" type="button">Next</button>
        </div>
      </div>
    </div>
  </div>

  <script src="./index.js">

  </script>

</body>

</html>
